---

title: 我的主页

trans: My_homepage_with_Butterfly

date: 2020-09-26 12:40:39

cover: https://img.imql.life/wallpapers-1/OHR.LavenderBlooms_ZH-CN5541892943_1920x1080.jpg

tags:

- Butterfly v3.7.7
- Hexo v5.2.0

categories:

- 我的博客

---

简洁却不简单，是一直以来我对博客的核心需求，NexT 主题侧重简洁，[Butterfly 主题](https://butterfly.js.org/)则侧重不简单，Butterfly 主题的博客我决定作为自己的主页。

<!-- more -->

{% note success %}

本文对于文件（代码）变动的描述方式为第一行说明本行为相关文件的哪一行（如果没有这行描述，则本行即为第一行），`-`指删掉改行，`+`指增加改行（如果你是直接复制此行，请注意删掉`+`和上下文对齐）。另外，本文对于文件（代码）变动的描述只针对当时的文件（代码）版本，请根据实际情况决定对自己的相应文件（代码）进行变动。

{% endnote %}

## 搭建

{% note success %}

本部分参照[我的博客的诞生（一）](<https://blog.imql.life/2020/01/24/My_HexoBlog_with_NexT(1)/>)进行。

{% endnote %}

登录 [GitHub](https://github.com/)，新建一个公开仓库，仓库名设定为我的主页域名，即 www.imql.life。

登录 [Gitee](https://gitee.com/)，新建一个公开仓库，仓库名也是设定为我的主页域名，即 www.imql.life。

再新建文件夹 www，作为<博客构建目录>，进入<博客构建目录>，进入终端，执行`hexo init`进行初始化。

安装 Git 插件：

```bash
npm install --save hexo-deployer-git
```

编辑 Hexo 的配置文件：

```diff
# 本行为<博客构建目录>\_config.yml的第102行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第102行，请以实际情况为准）
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
-  type: ''
```

```diff
# 本行为<博客构建目录>\_config.yml的第102行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第102行，请以实际情况为准）
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
+  type: git
+  repo:
+   github: git@github.com:ql-isaac/www.imql.life.git,master
+   gitee: git@gitee.com:ql-isaac/www.imql.life.git,master
```

在终端输入 `hexo g -d`，回车，进行博客的最终操作——生成静态文件后立即部署到仓库中。

之后就是部署至 Vercel 和 Webify，实现境内境外双线部署。

## Hexo 的个性化设置和配置

{% note success %}

本部分参考[我的博客的诞生（二）的相应部分](<https://blog.imql.life/2020/01/24/My_HexoBlog_with_NexT(2)/#Hexo-%E7%9A%84%E4%B8%AA%E6%80%A7%E5%8C%96%E8%AE%BE%E7%BD%AE%E5%92%8C%E9%85%8D%E7%BD%AE>)进行。

{% endnote %}

### Butterfly 主题的下载和设置

在<博客构建目录>下进入终端，输入如下命令，等待 Butterfly 下载到当前文件夹下 themes 下 butterfly 下。

```powershell
git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly
```

下载完成后，编辑 Hexo 的配置文件：

```powershell
# 本行为<博客构建目录>\_config.yml的第97行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第97行，请以实际情况为准）
# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
-theme: landscape
```

```powershell
# 本行为<博客构建目录>\_config.yml的第97行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第97行，请以实际情况为准）
# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
+theme: butterfly
```

### 配置博客基本信息

编辑 Hexo 的配置文件，个性化配置自己的站点信息：

```diff
# 本行为<博客构建目录>\_config.yml的第4行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第4行，请以实际情况为准）
# Site
-title: Hexo
-subtitle: ''
-description: ''
-keywords:
-author: John Doe
-language: en
timezone: ''
```

```diff
# 本行为<博客构建目录>\_config.yml的第4行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第4行，请以实际情况为准）
# Site
+title: IMQL.LIFE
+subtitle: It's a beautiful day!
+description: 一尘不染不是不再有尘埃，而是尘埃让它飞扬，我自做我的阳光。
+keywords: 学习与生活
+author: ql
+language: zh-CN
timezone:
```

### 配置永久链接

配置永久链接为年月日加文章标题的英文翻译：

```diff
# 本行为<博客构建目录>\_config.yml的第13行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第13行，请以实际情况为准）
# URL
## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'
-url: http://yoursite.com
root: /
-permalink: :year/:month/:day/:title/
permalink_defaults:
pretty_urls:
  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks
  trailing_html: true # Set to false to remove trailing '.html' from permalinks
```

```diff
# 本行为<博客构建目录>\_config.yml的第13行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第13行，请以实际情况为准）
# URL
## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'
+url: https://www.imql.life
root: /
+permalink: :year/:month/:day/:trans/
permalink_defaults:
pretty_urls:
  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks
  trailing_html: true # Set to false to remove trailing '.html' from permalinks
```

### 更换默认的 Markdown 渲染器

同[我的博客的诞生（二）中的步骤](<https://blog.imql.life/2020/01/24/My_HexoBlog_with_NexT(2)/#%E6%9B%B4%E6%8D%A2%E9%BB%98%E8%AE%A4%E7%9A%84-Markdown-%E6%B8%B2%E6%9F%93%E5%99%A8-1>)。

## Butterfly 的个性化设置与配置

### 安装 pug 渲染插件

```bash
npm install hexo-renderer-pug
```

### 创建新主题配置文件

为便于对主题配置文件的管理，自 Hexo v5.0.0 开始，可以在<博客构建目录>下新建一个文件 \_config.<theme>.yml，此处即为 \_config.butterfly.yml，然后把旧主题配置文件 \_config.yml 的內容复制到 \_config.butterfly.yml 去。

### 开启菜单

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第8行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第8行，请以实际情况为准）
menu:
-  # Home: / || fas fa-home
-  # Archives: /archives/ || fas fa-archive
-  # Tags: /tags/ || fas fa-tags
-  # Categories: /categories/ || fas fa-folder-open
-  # List||fas fa-list:
-  #   Music: /music/ || fas fa-music
-  #   Movie: /movies/ || fas fa-video
-  # Link: /link/ || fas fa-link
-  # About: /about/ || fas fa-heart
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第8行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第8行，请以实际情况为准）
menu:
+  首页: / || fas fa-home
+  标签: /tags/ || fas fa-tags
+  分类: /categories/ || fas fa-folder-open
+  归档: /archives/ || fas fa-archive
+  阅读: /books/ || fas fa-book
+  电影: /movies/ || fas fa-video
+  游戏: /games/ || fas fa-gamepad
+  友链: /link/ || fas fa-link
+  #关于: /about/ || fas fa-heart
```

#### 添加标签和分类页面

在<博客构建目录>下进入终端，执行如下命令。

```bash
hexo new page tags
```

编辑生成的 index.md：

```diff
---
-title: tags
date: 2020-09-19 17:09:59
---
```

```diff
---
+title: 标签
date: 2020-09-19 17:09:59
+type: tags
+top_img: <自己图床的地址>
---
```

以上 top_img 指定的为标签页大图：

![标签页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654597147552-54692c89-eb81-42cb-b5e0-56b9120db441.png#clientId=u760df89f-2afb-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=ub53df5ed&name=%E6%A0%87%E7%AD%BE%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1029&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1616704&status=done&style=none&taskId=u428029df-bb1e-4287-a666-c76bffe655d&title=)

在<博客构建目录>下进入终端，执行如下命令。

```bash
hexo new page categories
```

编辑生成的 index.md：

```diff
---
-title: categories
date: 2020-09-19 17:13:54
---
```

```diff
---
+title: 分类
date: 2020-09-19 17:13:54
+type: categories
+top_img: <自己图床的地址>
---
```

以上 top_img 指定的为分类页大图：

![分类页大图·.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654529293488-42e949b7-7626-4ab7-839c-7b0a72aef41d.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=u6c24333c&name=%E5%88%86%E7%B1%BB%E9%A1%B5%E5%A4%A7%E5%9B%BE%C2%B7.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1287803&status=done&style=none&taskId=u4d8a5e94-9009-4eb2-b914-47886ac98b8&title=)

编辑文章模板文件（为<博客构建目录>下 scaffolds 下 post.md）：

```diff
---
title: {{ title }}
date: {{ date }}
tags:
+categories:
---
```

#### 加入豆瓣页面

在<博客构建目录>下进入终端，输入如下命令安装插件 hexo-butterfly-douban。

```bash
npm install --save hexo-butterfly-douban
```

编辑 Hexo 的配置文件：

```diff
# 本行为<博客构建目录>\_config.yml的第110行（随着Hexo的不断更新，本行对应在你的_config.yml中不一定是第110行，请以实际情况为准
+douban:
+  user: <豆瓣ID>
+  builtin: true
+  book:
+    title: <书籍页面的标题>
+    quote: <开头的引言>
+    meta: true
+    comments: true
+    top_img: <自己图床的地址>
+    aside: true
+  movie:
+    title: <电影页面的标题>
+    quote: <开头的引言>
+    meta: true
+    comments: true
+    top_img: <自己图床的地址>
+    aside: true
+  game:
+    title: <游戏页面的标题>
+    quote: <开头的引言>
+    meta: true
+    comments: true
+    top_img: <自己图床的地址>
+    aside: true
+  timeout: 10000
```

以上 book 下的 top_img 指定的为书籍页大图：

![书籍页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654529493308-674a9241-ee5d-43f6-a408-9cc6a38f4f6d.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=u67f7134a&name=%E4%B9%A6%E7%B1%8D%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1614715&status=done&style=none&taskId=ucf8577be-a551-4966-9e37-5af29fcc326&title=)

以上 movie 下的 top_img 指定的为电影页大图：

![电影页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654529558233-a57e2eda-61c5-4095-ac2b-23b7b4943a64.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=u861d2353&name=%E7%94%B5%E5%BD%B1%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=663572&status=done&style=none&taskId=u79d17c59-b6ff-4d09-9ca1-d9a91aa1c90&title=)

以上 game 下的 top_img 指定的为游戏页大图：

![游戏页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654529614681-820f123e-2d05-41c9-b595-0509f551c725.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=uf7d82372&name=%E6%B8%B8%E6%88%8F%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2130991&status=done&style=none&taskId=ufbd494c4-ef71-4373-89ec-6815427b756&title=)

#### 添加友链页面

在<博客构建目录>下进入终端，执行如下命令。

```bash
hexo new page link
```

编辑生成的 index.md：

```diff
---
-title: links
date: 2020-09-19 17:16:16
---
```

```diff
---
+title: 友情链接
date: 2020-09-19 17:16:16
+type: link
+top_img: <自己图床的地址>
---
```

以上 top_img 指定的为友链页大图：

![友链页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654529734636-7d00d895-4b54-4475-9143-c5e43ee4eeec.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=u17bd8725&name=%E5%8F%8B%E9%93%BE%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1475570&status=done&style=none&taskId=u70300005-5aff-4a3c-a666-f82e9c7e7bf&title=)

### 代码块设置

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第25行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第25行，请以实际情况为准）
-highlight_theme: light #  darker / pale night / light / ocean / mac / mac light / false
highlight_copy: true # copy button
highlight_lang: true # show the code language
highlight_shrink: false # true: shrink the code blocks / false: expand the code blocks | none: expand code blocks and hide the button
highlight_height_limit: false # unit: px
code_word_wrap: false
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第25行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第25行，请以实际情况为准）
+highlight_theme: mac light #  darker / pale night / light / ocean / mac / mac light / false
highlight_copy: true # copy button
highlight_lang: true # show the code language
highlight_shrink: false # true: shrink the code blocks / false: expand the code blocks | none: expand code blocks and hide the button
highlight_height_limit: false # unit: px
code_word_wrap: false
```

{% note info %}

以上设置为个人偏好，请查看[主题文档相应说明](https://butterfly.js.org/posts/4aa8abbe/#%E4%BB%A3%E7%A2%BC)确定自己的偏好。

{% endnote %}

### 添加社交链接

编辑 Butterfly 的配置文件，个性化添加自己的社交链接：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第40行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第40行，请以实际情况为准）
# social settings (社交圖標設置)
# formal:
#   icon: link || the description
social:
-  # fab fa-github: https://github.com/xxxxx || Github
-  # fas fa-envelope: mailto:xxxxxx@gmail.com || Email
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第40行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第40行，请以实际情况为准）
# social settings (社交圖標設置)
# formal:
#   icon: link || the description
social:
+  fab fa-github: https://github.com/ql-isaac || Github
+  fas fa-envelope: mailto:834471527@qq.com || Email
```

### 添加搜索功能

在<博客构建目录>下进入终端，输入如下命令安装 hexo-generator-search。

```diff
npm install --save hexo-generator-search
```

开启搜索功能：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第56行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第56行，请以实际情况为准）
# Local search
local_search:
-  enable: false
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第56行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第56行，请以实际情况为准）
# Local search
local_search:
+  enable: true
```

### 配置站点图标

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第81行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第81行，请以实际情况为准）
# Favicon（網站圖標）
-favicon: /img/favicon.png
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第81行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第81行，请以实际情况为准）
# Favicon（網站圖標）
+favicon: <自己图床的地址或者本地地址>
```

效果图：

![配置站点图标.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654528233479-b6f4803b-8cc1-416a-a26e-9d96904b7b67.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=uc13d5678&name=%E9%85%8D%E7%BD%AE%E7%AB%99%E7%82%B9%E5%9B%BE%E6%A0%87.png&originHeight=36&originWidth=549&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4090&status=done&style=none&taskId=u0b7dc9a3-95a0-4ddd-8b8c-dac230bdbe0&title=)

### 头像

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第84行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第84行，请以实际情况为准）
# Avatar (頭像)
avatar:
-  img: https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png
  effect: false
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第84行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第84行，请以实际情况为准）
# Avatar (頭像)
avatar:
+  img: <自己图床的地址或者本地地址>
  effect: false
```

### 首页大图

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第92行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第92行，请以实际情况为准）
# The banner image of home page
-index_img:
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第92行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第92行，请以实际情况为准）
# The banner image of home page
+index_img: <自己图床的地址或者本地地址>
```

效果图：

![首页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654528627356-196b6e4e-8f4c-4d80-bff4-9e68fa7fcafe.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=u9d4c39ca&name=%E9%A6%96%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4759217&status=done&style=none&taskId=u8f269868-d91f-4fed-a3a9-c6a4dfe2a73&title=)

### 归档页大图

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第98行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第98行，请以实际情况为准）
# The banner image of archive page
-archive_img:
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第98行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第98行，请以实际情况为准）
# The banner image of archive page
+archive_img: <自己图床的地址或者本地地址>
```

效果图：

![归档页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654528822530-efc2b37d-cb85-44ce-94f9-0ef2857c7936.png#clientId=uba1920f2-d817-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=ua0aa23b9&name=%E5%BD%92%E6%A1%A3%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1602253&status=done&style=none&taskId=u8bef1019-c290-4097-8034-de40328c1b2&title=)

### 子标签页大图

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第101行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第101行，请以实际情况为准）
# If the banner of tag page not setting, it will show the top_img
# note: tag page, not tags page (子標籤頁面的 top_img)
-tag_img:
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第101行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第101行，请以实际情况为准）
# If the banner of tag page not setting, it will show the top_img
# note: tag page, not tags page (子標籤頁面的 top_img)
+tag_img: <自己图床的地址或者本地地址>
```

效果图：

![子标签页大图.png](https://cdn.nlark.com/yuque/0/2022/png/8391941/1654596870018-ad5a28aa-9260-4ce9-8125-ed06f31a7a79.png#clientId=ud2e9b1b1-9d63-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=ue1901bbf&name=%E5%AD%90%E6%A0%87%E7%AD%BE%E9%A1%B5%E5%A4%A7%E5%9B%BE.png&originHeight=1030&originWidth=1920&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1386443&status=done&style=none&taskId=ue5fd9aa1-0ea1-44bb-ab5a-5e739360a2d&title=)

{% note warning %}

注意和标签页大图的区分。

{% endnote %}

### 子分类页大图

编辑 Butterfly 的配置文件：

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第110行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第110行，请以实际情况为准）
# If the banner of category page not setting, it will show the top_img
# note: category page, not categories page (子分類頁面的 top_img)
-category_img:
```

```diff
# 本行为<博客构建目录>\_config.butterfly.yml的第110行（随着Butterfly的不断更新，本行对应在你的_config.butterfly.yml中不一定是第110行，请以实际情况为准）
# If the banner of category page not setting, it will show the top_img
# note: category page, not categories page (子分類頁面的 top_img)
+category_img: <自己图床的地址或者本地地址>
```

效果图：

{% note warning %}

注意和分类页大图的区分。

{% endnote %}
