---
title: 语雀云端写作
urlname: bghlql
date: "2023-08-12 11:11:51"
updated: "2023-08-13 15:07:23"
author: ql-isaac
trans: Writing_on_The_Cloud_With_YuQue
cover: "https://img.imql.life/Working-rafiki.png"
tags:
  - elog
categories:
  - 我的博客
---

语雀云端写作实现了 Markdown 格式的博文与博客构建目录的分离，这样的话，我想同时使用多少个主题都是没有问题的了，更重要的事，可以完全实现静态博客在线编辑。

<!-- more -->

{% note success %}
本文对于文件（代码）变动的描述方式为`-`指删掉该行，`+`指增加改行（如果你是直接复制此行，请注意删掉`+`和上下文对齐）。另外，本文对于文件（代码）变动的描述只针对当时的文件（代码）版本，请根据实际情况决定对自己的相应文件（代码）进行变动。
{% endnote %}

## 博文迁移

[首先是注册语雀账号](https://www.yuque.com/login?platform=wechat&inviteToken=f6e959505e77f114312173f53ec62f7b8996ef80b543c7af96cf3f987a7b91e4)，登陆上后，新建知识库，名称就为个人博客，再点击右上方的新建，选择导入，选择 Markdown 格式，将本地博文（即 \_post 下的 Markdown 文件）批量（按住 Ctrl 可多选）导入至知识库个人博客。
导入成功后会发现每篇博文的开头，即 front-matter 部分有点乱，可以参看下图说明更正一下。
![front-matter.png](https://img.imql.life/illustrations/ac2ddcd3949a2858339eef3443e4719d.png)

## 安装 elog

全局安装 @elog/cli：

```bash
npm install -g @elog/cli
```

进入<博客构建目录>，执行以下命令进行初始化，会在根目录生成一份配置文件 elog.config.js 和本地调试用的环境变量文件 .elog.env。

```bash
elog init
```

## 本地调试

将 .elog.env 加入 .gitignore，防止密码等信息提交：

```diff
.DS_Store
Thumbs.db
db.json
*.log
public/
node_modules/
.deploy*/
+.elog.env
```

### 配置

编辑 .elog.env，配置语雀认证的环境变量：

```diff
# 语雀（Token方式）
YUQUE_TOKEN=
# 语雀（帐号密码方式）
YUQUE_USERNAME=
YUQUE_PASSWORD=
YUQUE_LOGIN=
YUQUE_REPO=
```

{% note info %}
Token 方式和帐号密码方式二选一，现在使用 Token 需要开会员，没有会员的就使用帐号密码方式吧。YUQUE_LOGIN 和 YUQUE_REPO 的获取方式见 [elog 官方文档的关键信息获取](https://elog.1874.cool/notion/gvnxobqogetukays#%E8%AF%AD%E9%9B%80)。
{% endnote %}
再配置图床认证的环境变量，平台可在腾讯云、阿里云、又拍云、七牛云和 GitHub 中选择一个，详细配置方式见 [elog 官方文档的关键信息获取](https://elog.1874.cool/notion/gvnxobqogetukays#%E5%9B%BE%E5%BA%8A)。
编辑 elog.config.js，设置写作平台为 yuque-pwd：

```diff
...
write: {
-     platform: "yuque"
+    platform: "yuque-pwd",
...
```

配置本地部署方式：

```diff
...
deploy: {
    platform: "local",
    local: {
-      outputDir: "./docs",
+      outputDir: "source/_posts",
      filename: "title",
-      format: "markdown",
+      format: "matter-markdown",
      catalog: false,
      formatExt: "",
    },
...
```

开启图床，设置图床平台：

```diff
...
image: {
-    enable: false,
+    enable: true
-    platform: "local",
+    platform: "<图床平台>",
...
```

最后配置图床为腾讯云、阿里云、又拍云、七牛云或 GitHub，配置方式见 [elog 官方文档的配置详情](https://elog.1874.cool/notion/fe8ywmt999gon12w#%E5%9B%BE%E5%BA%8A%E5%B9%B3%E5%8F%B0)。

### 同步

```diff
elog sync -e .elog
```

-
